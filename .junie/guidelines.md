# ZIP Editor コーディングガイドライン

このドキュメントは、ZIP Editorプロジェクトのコーディングガイドラインを定義します。

## 1. コード構造

### 1.1 パッケージ構造
- メインアプリケーションコードは `main` パッケージに配置します。
- 将来的に機能が拡大する場合は、適切なパッケージに分割することを検討してください。

### 1.2 ファイル構成
- 関連する機能は同じファイルにまとめてください。
- 大きなファイルは、論理的な単位で分割することを検討してください。

## 2. エンコーディング処理

### 2.1 文字エンコーディング
- ZIPファイル内のファイル名は様々なエンコーディングで保存されている可能性があります。
- `autoDetectEncoding` 関数を使用して、エンコーディングを自動検出してUTF-8に変換してください。
- サポートするエンコーディング:
  - Japanese: Shift-JIS, EUC-JP, ISO-2022-JP
  - Korean: EUC-KR
  - Chinese: GBK, Big5
  - Western: Windows-1252
  - Unicode: UTF-16BE, UTF-16LE

### 2.2 エンコーディング検出
- エンコーディング検出に失敗した場合は、Shift-JISをフォールバックとして使用します。
- 制御文字を含む文字列は、誤検出の可能性があるため、別のエンコーディングを試してください。

## 3. GUI設計

### 3.1 コンポーネント
- ウィンドウタイトルは日本語で「ZIP ファイルビューア」とします。
- 左側にツリービュー、右側にテキストエディットを配置します。
- ボタンは下部に配置します。

### 3.2 イベント処理
- ドラッグ＆ドロップでZIPファイルを開けるようにします。
- ツリービューのアイテムをクリックすると、そのディレクトリ内のファイル一覧を表示します。
- Ctrl+クリックまたはコンテキストメニューで削除フラグを切り替えられるようにします。

## 4. エラー処理

### 4.1 エラーメッセージ
- エラーメッセージは日本語で表示します。
- エラーの詳細情報も含めてください。

### 4.2 例外処理
- ファイル操作時には適切なエラーハンドリングを行ってください。
- リソースを使用する場合は、`defer` を使用して確実に解放してください。

## 5. ファイル操作

### 5.1 一時ファイル
- 一時ファイルは `os.MkdirTemp` を使用して作成します。
- 一時ファイルの命名規則は `zip-editor-` プレフィックスを使用します。

### 5.2 ファイル抽出
- ZIPファイルからファイルを抽出する際は、エンコーディングを適切に処理してください。
- 抽出したファイルは、デフォルトのアプリケーションで開くようにします。

## 6. コメント

### 6.1 コードコメント
- 関数やメソッドには適切なコメントを付けてください。
- 複雑なロジックには説明コメントを追加してください。

### 6.2 言語
- コメントやメッセージは必ず日本語で記述します。

## 7. テスト

### 7.1 テスト方針
- 重要な機能には単体テストを作成してください。
- エンコーディング処理には特に注意してテストを行ってください。

### 7.2 テストデータ
- 様々なエンコーディングのファイル名を含むZIPファイルをテストデータとして用意してください。

## 8. バージョン管理

### 8.1 コミットメッセージ
- コミットメッセージは変更内容を明確に説明してください。
- 日本語で記述してください。

### 8.2 ブランチ戦略
- ブランチを作成するのは、「ブランチを作成して下さい」と言われたときだけです。
- 新機能開発は feature/ プレフィックスのブランチで行ってください。
- バグ修正は bugfix/ プレフィックスのブランチで行ってください。

### 9. 実装手順
- 「ISSUEを作成して下さい」と言われたらISSUEのみを作成し、コードの修正は行いません。
- コードを修正する際はISSUEに書かれている内容を修正し、それ以外のことは行いません。
- コードを修正する際はmasterブランチでは作業せず、作業内容に対応したブランチを作成します。